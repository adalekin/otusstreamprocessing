<svg id="mermaid-1628444143091" width="100%" xmlns="http://www.w3.org/2000/svg" height="2643" style="max-width: 1485px;" viewBox="-50 -10 1485 2643"><rect x="65" y="1333" fill="rgba(0, 255, 0, .1)" width="1320" height="1214" class="rect"/><rect x="65" y="877" fill="rgba(0, 255, 0, .1)" width="845" height="446" class="rect"/><rect x="65" y="75" fill="rgba(0, 255, 0, .1)" width="1320" height="792" class="rect"/><style>#mermaid-1628444143091 {font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-1628444143091 .error-icon{fill:#552222;}#mermaid-1628444143091 .error-text{fill:#552222;stroke:#552222;}#mermaid-1628444143091 .edge-thickness-normal{stroke-width:2px;}#mermaid-1628444143091 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1628444143091 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1628444143091 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1628444143091 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1628444143091 .marker{fill:#333333;stroke:#333333;}#mermaid-1628444143091 .marker.cross{stroke:#333333;}#mermaid-1628444143091 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-1628444143091 .actor{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#mermaid-1628444143091 text.actor&gt;tspan{fill:black;stroke:none;}#mermaid-1628444143091 .actor-line{stroke:grey;}#mermaid-1628444143091 .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333;}#mermaid-1628444143091 .messageLine1{stroke-width:1.5;stroke-dasharray:2,2;stroke:#333;}#mermaid-1628444143091 #arrowhead path{fill:#333;stroke:#333;}#mermaid-1628444143091 .sequenceNumber{fill:white;}#mermaid-1628444143091 #sequencenumber{fill:#333;}#mermaid-1628444143091 #crosshead path{fill:#333;stroke:#333;}#mermaid-1628444143091 .messageText{fill:#333;stroke:#333;}#mermaid-1628444143091 .labelBox{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#mermaid-1628444143091 .labelText,#mermaid-1628444143091 .labelText&gt;tspan{fill:black;stroke:none;}#mermaid-1628444143091 .loopText,#mermaid-1628444143091 .loopText&gt;tspan{fill:black;stroke:none;}#mermaid-1628444143091 .loopLine{stroke-width:2px;stroke-dasharray:2,2;stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);}#mermaid-1628444143091 .note{stroke:#aaaa33;fill:#fff5ad;}#mermaid-1628444143091 .noteText,#mermaid-1628444143091 .noteText&gt;tspan{fill:black;stroke:none;}#mermaid-1628444143091 .activation0{fill:#f4f4f4;stroke:#666;}#mermaid-1628444143091 .activation1{fill:#f4f4f4;stroke:#666;}#mermaid-1628444143091 .activation2{fill:#f4f4f4;stroke:#666;}#mermaid-1628444143091 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g/><g><line id="actor405" x1="75" y1="5" x2="75" y2="2632" class="actor-line" stroke-width="0.5px" stroke="#999"/><rect x="0" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="75" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="75" dy="0">User</tspan></text></g><g><line id="actor406" x1="284" y1="5" x2="284" y2="2632" class="actor-line" stroke-width="0.5px" stroke="#999"/><rect x="209" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="284" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="284" dy="0">Gateway</tspan></text></g><g><line id="actor407" x1="495" y1="5" x2="495" y2="2632" class="actor-line" stroke-width="0.5px" stroke="#999"/><rect x="420" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="495" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="495" dy="0">Message Broker</tspan></text></g><g><line id="actor408" x1="695" y1="5" x2="695" y2="2632" class="actor-line" stroke-width="0.5px" stroke="#999"/><rect x="620" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="695" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="695" dy="0">User Service</tspan></text></g><g><line id="actor409" x1="895" y1="5" x2="895" y2="2632" class="actor-line" stroke-width="0.5px" stroke="#999"/><rect x="820" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="895" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="895" dy="0">Billing Service</tspan></text></g><g><line id="actor410" x1="1095" y1="5" x2="1095" y2="2632" class="actor-line" stroke-width="0.5px" stroke="#999"/><rect x="1020" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="1095" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="1095" dy="0">Order Service</tspan></text></g><g><line id="actor411" x1="1295" y1="5" x2="1295" y2="2632" class="actor-line" stroke-width="0.5px" stroke="#999"/><rect x="1220" y="0" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="1295" y="32.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="1295" dy="0">Notification Service</tspan></text></g><defs><marker id="arrowhead" refX="9" refY="5" markerUnits="userSpaceOnUse" markerWidth="12" markerHeight="12" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z"/></marker></defs><defs><marker id="crosshead" markerWidth="15" markerHeight="8" orient="auto" refX="16" refY="4"><path fill="black" stroke="#000000" stroke-width="1px" d="M 9,2 V 6 L16,4 Z" style="stroke-dasharray: 0, 0;"/><path fill="none" stroke="#000000" stroke-width="1px" d="M 0,1 L 6,7 M 6,1 L 0,7" style="stroke-dasharray: 0, 0;"/></marker></defs><defs><marker id="filled-head" refX="18" refY="7" markerWidth="20" markerHeight="28" orient="auto"><path d="M 18,7 L9,13 L14,7 L9,1 Z"/></marker></defs><defs><marker id="sequencenumber" refX="15" refY="15" markerWidth="60" markerHeight="40" orient="auto"><circle cx="15" cy="15" r="6"/></marker></defs><g><rect x="100" y="95" fill="#EDF2AE" stroke="#666" width="150" height="36" rx="0" ry="0" class="note"/><text x="175" y="100" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="noteText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 14px; font-weight: 400;"><tspan x="175">Register a user</tspan></text></g><text x="180" y="146" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">POST /register/</text><line x1="75" y1="179" x2="284" y2="179" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><g><rect x="279" y="181" fill="#EDF2AE" stroke="#666" width="10" height="92" rx="0" ry="0" class="activation0"/></g><g><rect x="309" y="189" fill="#EDF2AE" stroke="#666" width="161" height="36" rx="0" ry="0" class="note"/><text x="390" y="194" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="noteText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 14px; font-weight: 400;"><tspan x="390">RegistrationRequested</tspan></text></g><text x="392" y="240" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">publish</text><line x1="289" y1="273" x2="495" y2="273" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><g><rect x="490" y="273" fill="#EDF2AE" stroke="#666" width="10" height="48" rx="0" ry="0" class="activation0"/></g><text x="598" y="288" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">consume</text><line x1="500" y1="321" x2="695" y2="321" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"/><g><rect x="690" y="321" fill="#EDF2AE" stroke="#666" width="10" height="48" rx="0" ry="0" class="activation0"/></g><text x="593" y="336" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">publish</text><line x1="690" y1="369" x2="495" y2="369" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><g><rect x="490" y="371" fill="#EDF2AE" stroke="#666" width="10" height="314" rx="0" ry="0" class="activation0"/></g><g><rect x="320" y="379" fill="#EDF2AE" stroke="#666" width="150" height="36" rx="0" ry="0" class="note"/><text x="395" y="384" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="noteText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 14px; font-weight: 400;"><tspan x="395">UserCreated</tspan></text></g><text x="387" y="430" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">consume</text><line x1="490" y1="463" x2="284" y2="463" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"/><g><rect x="279" y="465" fill="#EDF2AE" stroke="#666" width="10" height="46" rx="0" ry="0" class="activation0"/></g><text x="177" y="478" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">201 CREATED</text><line x1="279" y1="511" x2="75" y2="511" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="898" y="526" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">consume</text><line x1="500" y1="559" x2="1295" y2="559" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"/><g><rect x="1290" y="561" fill="#EDF2AE" stroke="#666" width="10" height="76" rx="0" ry="0" class="activation0"/></g><text x="1300" y="574" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Store an email</text><path d="M 1300,607 C 1360,597 1360,637 1300,627" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="698" y="652" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">consume</text><line x1="500" y1="685" x2="895" y2="685" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"/><g><rect x="890" y="685" fill="#EDF2AE" stroke="#666" width="10" height="172" rx="0" ry="0" class="activation0"/></g><text x="900" y="700" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Create an account</text><path d="M 900,733 C 960,723 960,763 900,753" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="693" y="778" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">publish</text><line x1="890" y1="811" x2="495" y2="811" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><g><rect x="320" y="821" fill="#EDF2AE" stroke="#666" width="150" height="36" rx="0" ry="0" class="note"/><text x="395" y="826" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="noteText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 14px; font-weight: 400;"><tspan x="395">AccountCreated</tspan></text></g><g><rect x="100" y="897" fill="#EDF2AE" stroke="#666" width="159" height="36" rx="0" ry="0" class="note"/><text x="180" y="902" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="noteText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 14px; font-weight: 400;"><tspan x="180">Charge a user account</tspan></text></g><text x="180" y="948" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">POST /transaction/</text><line x1="75" y1="981" x2="284" y2="981" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><g><rect x="279" y="983" fill="#EDF2AE" stroke="#666" width="10" height="92" rx="0" ry="0" class="activation0"/></g><g><rect x="309" y="991" fill="#EDF2AE" stroke="#666" width="159" height="36" rx="0" ry="0" class="note"/><text x="389" y="996" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="noteText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 14px; font-weight: 400;"><tspan x="389">TransactionRequested</tspan></text></g><text x="392" y="1042" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">publish</text><line x1="289" y1="1075" x2="495" y2="1075" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><g><rect x="490" y="1075" fill="#EDF2AE" stroke="#666" width="10" height="48" rx="0" ry="0" class="activation0"/></g><text x="698" y="1090" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">consume</text><line x1="500" y1="1123" x2="895" y2="1123" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"/><g><rect x="890" y="1123" fill="#EDF2AE" stroke="#666" width="10" height="48" rx="0" ry="0" class="activation0"/></g><text x="693" y="1138" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">publish</text><line x1="890" y1="1171" x2="495" y2="1171" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><g><rect x="490" y="1173" fill="#EDF2AE" stroke="#666" width="10" height="92" rx="0" ry="0" class="activation0"/></g><g><rect x="320" y="1181" fill="#EDF2AE" stroke="#666" width="150" height="36" rx="0" ry="0" class="note"/><text x="395" y="1186" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="noteText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 14px; font-weight: 400;"><tspan x="395">TransactionCreated</tspan></text></g><text x="387" y="1232" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">consume</text><line x1="490" y1="1265" x2="284" y2="1265" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"/><g><rect x="279" y="1265" fill="#EDF2AE" stroke="#666" width="10" height="48" rx="0" ry="0" class="activation0"/></g><text x="177" y="1280" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">201 CREATED</text><line x1="279" y1="1313" x2="75" y2="1313" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><g><rect x="100" y="1353" fill="#EDF2AE" stroke="#666" width="150" height="36" rx="0" ry="0" class="note"/><text x="175" y="1358" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="noteText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 14px; font-weight: 400;"><tspan x="175">Create an order</tspan></text></g><text x="180" y="1404" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">POST /order/</text><line x1="75" y1="1437" x2="284" y2="1437" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><g><rect x="279" y="1439" fill="#EDF2AE" stroke="#666" width="10" height="92" rx="0" ry="0" class="activation0"/></g><g><rect x="309" y="1447" fill="#EDF2AE" stroke="#666" width="150" height="36" rx="0" ry="0" class="note"/><text x="384" y="1452" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="noteText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 14px; font-weight: 400;"><tspan x="384">OrderRequested</tspan></text></g><text x="392" y="1498" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">publish</text><line x1="289" y1="1531" x2="495" y2="1531" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><g><rect x="490" y="1531" fill="#EDF2AE" stroke="#666" width="10" height="48" rx="0" ry="0" class="activation0"/></g><text x="798" y="1546" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">consume</text><line x1="500" y1="1579" x2="1095" y2="1579" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"/><g><rect x="1090" y="1579" fill="#EDF2AE" stroke="#666" width="10" height="316" rx="0" ry="0" class="activation0"/></g><text x="1100" y="1594" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Create an order</text><path d="M 1100,1627 C 1160,1617 1160,1657 1100,1647" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="793" y="1672" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">publish</text><line x1="1090" y1="1705" x2="495" y2="1705" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><g><rect x="490" y="1707" fill="#EDF2AE" stroke="#666" width="10" height="140" rx="0" ry="0" class="activation0"/></g><g><rect x="320" y="1715" fill="#EDF2AE" stroke="#666" width="150" height="36" rx="0" ry="0" class="note"/><text x="395" y="1720" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="noteText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 14px; font-weight: 400;"><tspan x="395">OrderCreated</tspan></text></g><text x="387" y="1766" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">consume</text><line x1="490" y1="1799" x2="284" y2="1799" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"/><g><rect x="279" y="1801" fill="#EDF2AE" stroke="#666" width="10" height="46" rx="0" ry="0" class="activation0"/></g><text x="177" y="1814" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">201 CREATED</text><line x1="279" y1="1847" x2="75" y2="1847" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="793" y="1862" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">publish</text><line x1="1090" y1="1895" x2="495" y2="1895" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><g><rect x="490" y="1897" fill="#EDF2AE" stroke="#666" width="10" height="92" rx="0" ry="0" class="activation0"/></g><g><rect x="311" y="1905" fill="#EDF2AE" stroke="#666" width="159" height="36" rx="0" ry="0" class="note"/><text x="391" y="1910" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="noteText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 14px; font-weight: 400;"><tspan x="391">TransactionRequested</tspan></text></g><text x="698" y="1956" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">consume</text><line x1="500" y1="1989" x2="895" y2="1989" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"/><g><rect x="890" y="1989" fill="#EDF2AE" stroke="#666" width="10" height="172" rx="0" ry="0" class="activation0"/></g><text x="900" y="2004" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Debit from the account</text><path d="M 900,2037 C 960,2027 960,2067 900,2057" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="693" y="2082" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">publish</text><line x1="890" y1="2115" x2="495" y2="2115" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><g><rect x="490" y="2117" fill="#EDF2AE" stroke="#666" width="10" height="92" rx="0" ry="0" class="activation0"/></g><g><rect x="309" y="2125" fill="#EDF2AE" stroke="#666" width="161" height="36" rx="0" ry="0" class="note"/><text x="390" y="2130" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="noteText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 14px; font-weight: 400;"><tspan x="390">TransactionCompleted</tspan></text></g><text x="798" y="2176" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">consume</text><line x1="500" y1="2209" x2="1095" y2="2209" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"/><g><rect x="1090" y="2209" fill="#EDF2AE" stroke="#666" width="10" height="126" rx="0" ry="0" class="activation0"/></g><text x="1100" y="2224" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Confirm an order</text><path d="M 1100,2257 C 1160,2247 1160,2287 1100,2277" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><text x="793" y="2302" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">publish</text><line x1="1090" y1="2335" x2="495" y2="2335" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><g><rect x="490" y="2337" fill="#EDF2AE" stroke="#666" width="10" height="92" rx="0" ry="0" class="activation0"/></g><g><rect x="320" y="2345" fill="#EDF2AE" stroke="#666" width="150" height="36" rx="0" ry="0" class="note"/><text x="395" y="2350" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="noteText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 14px; font-weight: 400;"><tspan x="395">OrderConfirmed</tspan></text></g><text x="898" y="2396" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">consume</text><line x1="500" y1="2429" x2="1295" y2="2429" class="messageLine1" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="stroke-dasharray: 3, 3; fill: none;"/><g><rect x="1290" y="2429" fill="#EDF2AE" stroke="#666" width="10" height="78" rx="0" ry="0" class="activation0"/></g><text x="1300" y="2444" text-anchor="middle" dominant-baseline="middle" alignment-baseline="middle" class="messageText" dy="1em" style="font-family: &quot;trebuchet ms&quot;, verdana, arial, sans-serif; font-size: 16px; font-weight: 400;">Send an email</text><path d="M 1300,2477 C 1360,2467 1360,2507 1300,2497" class="messageLine0" stroke-width="2" stroke="none" marker-end="url(#arrowhead)" style="fill: none;"/><g><rect x="0" y="2567" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="75" y="2599.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="75" dy="0">User</tspan></text></g><g><rect x="209" y="2567" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="284" y="2599.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="284" dy="0">Gateway</tspan></text></g><g><rect x="420" y="2567" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="495" y="2599.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="495" dy="0">Message Broker</tspan></text></g><g><rect x="620" y="2567" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="695" y="2599.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="695" dy="0">User Service</tspan></text></g><g><rect x="820" y="2567" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="895" y="2599.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="895" dy="0">Billing Service</tspan></text></g><g><rect x="1020" y="2567" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="1095" y="2599.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="1095" dy="0">Order Service</tspan></text></g><g><rect x="1220" y="2567" fill="#eaeaea" stroke="#666" width="150" height="65" rx="3" ry="3" class="actor"/><text x="1295" y="2599.5" dominant-baseline="central" alignment-baseline="central" class="actor" style="text-anchor: middle; font-size: 14px; font-weight: 400; font-family: Open-Sans, sans-serif;"><tspan x="1295" dy="0">Notification Service</tspan></text></g></svg>